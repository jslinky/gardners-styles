// Import theme overrides first
@import "../../theme/overrides";

$layout-column-min: 30ch !default;
$layout-gap: min(3vmax, var(--space-xl, 1rem)) !default;
// $layout-gap: var(--spacing-gutter);

// Grid layout
$layout-grid-min: var(--layout-column-min);
$layout-grid-gap: var(--layout-gap);
$layout-grid-template-columns: repeat(
  var(--layout-grid-auto-repeat, auto-fit),
  minmax(min(100%, var(--layout-grid-min)), 1fr)
);

/// Grid layout - define column variation
$column-count: 4 !default;
/* calculations */
$breakpoint: calc(
  var(--layout-grid-min) * var(--column-count) +
    (var(--layout-grid-gap) * (var(--column-count) - 1))
);
$column-size: calc((100% / var(--column-count)) - var(--layout-grid-gap));

// Flex layout
$flex-grid-min: var(--layout-column-min)!default;
$flex-grid-gap: var(--layout-gap)!default;

$register-layout: (
    'layout-column-min': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': #{$layout-column-min}
    ),
    'layout-gap': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': calc(clamp(0.25rem, 1vi, 1rem) * 1.42 * 1.42 * 1.42)
    ),
    'layout-grid-min': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': #{$layout-column-min}
    ),
    'layout-grid-gap': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': calc(clamp(0.25rem, 1vi, 1rem) * 1.42 * 1.42 * 1.42)
    ),
    'layout-grid-template-columns': (
        'syntax': "*",
        'inherits': false,
        'initial-value': repeat(auto-fit, minmax(min(100%, #{$layout-column-min}), 1fr))
    ),
    'column-count': (
        'syntax': "<number>",
        'inherits': false,
        'initial-value': #{$column-count}
    ),
    'breakpoint': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': calc(#{$layout-column-min} * #{$column-count} + (calc(clamp(0.25rem, 1vi, 1rem) * 1.42 * 1.42 * 1.42) * (#{$column-count} - 1)))
    ),
    'column-size': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': #{$column-size}
    ),
    'flex-grid-min': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': #{$layout-column-min}
    ),
    'flex-grid-gap': (
        'syntax': "<length>",
        'inherits': false,
        'initial-value': calc(clamp(0.25rem, 1vi, 1rem) * 1.42 * 1.42 * 1.42)
    )                                         
);