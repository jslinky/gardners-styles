// replace with oklch when lightningcss is in place
@use "sass:meta";
@use "../../theme/_index" as *;
@use "../../theme/overrides" as overrides;
@use "../functions/overrides" as *;
@use "../variables/config" as config;

$_colorNamePrefix: getColorPrefix();

/// Get overrides for checking color component values
$_overrides: meta.module-variables("overrides");

// Use override system for color component variables with fallbacks
$fg-threshold: get-override("fg-threshold", 0.7, $_overrides);
$fg-lightest-text: get-override("fg-lightest-text", 0, $_overrides);
$fg-darkest-text: get-override("fg-darkest-text", 1, $_overrides);
$fg-muted-lightest-text: get-override("fg-muted-lightest-text", 0.4, $_overrides);
$fg-muted-darkest-text: get-override("fg-muted-darkest-text", 0.90, $_overrides);

$primary-l: get-override("primary-l", 0.59, $_overrides);
$primary-c: get-override("primary-c", 0.14, $_overrides);
$primary-h: get-override("primary-h", 242, $_overrides);

$primary: oklch(var(--#{$_colorNamePrefix}primary-l) var(--#{$_colorNamePrefix}primary-c) var(--#{$_colorNamePrefix}primary-h));

// $secondary-l: var(--#{$_colorNamePrefix}primary-l-1);
$secondary-l: get-override("secondary-l", $primary-l, $_overrides);
$secondary-c: get-override("secondary-c", var(--#{$_colorNamePrefix}primary-c-1, var(--#{$_colorNamePrefix}primary-c)), $_overrides);
$secondary-h: get-override("secondary-h", var(--#{$_colorNamePrefix}primary-h-1, var(--#{$_colorNamePrefix}primary-h)), $_overrides);

$secondary: oklch(var(--#{$_colorNamePrefix}secondary-l) var(--#{$_colorNamePrefix}secondary-c) var(--#{$_colorNamePrefix}secondary-h)); 

// $tertiary-l: calc(var(--#{$_colorNamePrefix}primary-l-11) + 0.18);
$tertiary-l: get-override("tertiary-l", $primary-l + 0.28, $_overrides);
$tertiary-c: get-override("tertiary-c", calc(var(--#{$_colorNamePrefix}primary-c) - 0.080), $_overrides);
$tertiary-h: get-override("tertiary-h", var(--#{$_colorNamePrefix}primary-h-11, var(--#{$_colorNamePrefix}primary-h)), $_overrides);

$tertiary: oklch(var(--#{$_colorNamePrefix}tertiary-l) var(--#{$_colorNamePrefix}tertiary-c) var(--#{$_colorNamePrefix}tertiary-h)); 

$dark-l: get-override("dark-l", 0.23, $_overrides);
$dark-c: get-override("dark-c", 0, $_overrides);
$dark-h: get-override("dark-h", 0, $_overrides);

$dark: oklch(var(--#{$_colorNamePrefix}dark-l) var(--#{$_colorNamePrefix}dark-c) var(--#{$_colorNamePrefix}dark-h)); 

// $grey-l: if(meta.global-variable-exists(grey-l), $grey-l, $primary-l) !default;
// $grey-c: if(meta.global-variable-exists(grey-c), $grey-c, 0.050) !default;
// $grey-h: if(meta.global-variable-exists(grey-h), $grey-h, $primary) !default;

// $grey: oklch(var(--#{$_colorNamePrefix}grey-l) var(--#{$_colorNamePrefix}grey-c) var(--#{$_colorNamePrefix}grey-h))!default; 

